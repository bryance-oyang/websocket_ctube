<html>
	<head>
		<script lang="javascript">
			websocket = new WebSocket("ws://localhost:9999");
			websocket.binaryType = "arraybuffer";

			websocket.onmessage = (event) => {
				const data = new DataView(event.data)

				const ctx = document.getElementById("the_it").getContext("2d", {willReadFrequently: true});
				const img = ctx.getImageData(0, 0, 100, 100);
				const npix = 100*100;

				for (let i = 0; i < npix; i++) {

					img.data[4*i+0] = data.getUint8(i);
					img.data[4*i+1] = data.getUint8(i);
					img.data[4*i+2] = data.getUint8(i);
					img.data[4*i+3] = 255;
				}

				ctx.putImageData(img, 0, 0);
			}
		</script>
	</head>
	<body>
		<canvas id="the_it" width=100 height=100></canvas>
	</body>
</html>
